
SET(TESTCASE ${PROJECT_NAME}.PL4)



FILE(COPY PL4.dat DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/)
FILE(MAKE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/reference)
FILE(GLOB REFERENCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/reference/*.out)
#MESSAGE("REFERENCE_FILES: ${REFERENCE_FILES}")
FOREACH(file_ref ${REFERENCE_FILES})
  FILE(COPY ${REFERENCE_FILES} DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/reference)
ENDFOREACH()

# add test case
ADD_TEST(
  NAME ${TESTCASE}
  COMMAND ${ALOUFEM_EXE} PL4.DAT
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
)

# add validation test
ADD_TEST(
  NAME ${TESTCASE}.QA
  COMMAND ${VEC_COMPARE_TOOL} -r reference/disp_reference.out -f disp.out -v
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
)
SET_TESTS_PROPERTIES(${TESTCASE}.QA PROPERTIES DEPENDS ${TESTCASE})



MESSAGE("PROJECT_NAME ====  ${PROJECT_NAME}")